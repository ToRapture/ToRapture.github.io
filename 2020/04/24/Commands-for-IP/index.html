<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"torapture.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ifconfig https:&#x2F;&#x2F;linux.die.net&#x2F;man&#x2F;8&#x2F;ifconfig  Ifconfig is used to configure the kernel-resident network interfaces. It is used at boot time to set up interfaces as necessary. After that, it is usu">
<meta property="og:type" content="article">
<meta property="og:title" content="Commands for IP">
<meta property="og:url" content="https://torapture.github.io/2020/04/24/Commands-for-IP/index.html">
<meta property="og:site_name" content="ToRapture&#39;s Blog">
<meta property="og:description" content="ifconfig https:&#x2F;&#x2F;linux.die.net&#x2F;man&#x2F;8&#x2F;ifconfig  Ifconfig is used to configure the kernel-resident network interfaces. It is used at boot time to set up interfaces as necessary. After that, it is usu">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-04-24T08:47:00.000Z">
<meta property="article:modified_time" content="2020-10-11T14:07:40.589Z">
<meta property="article:author" content="ToRapture">
<meta property="article:tag" content="Network">
<meta property="article:tag" content="TCP&#x2F;IP">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://torapture.github.io/2020/04/24/Commands-for-IP/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Commands for IP | ToRapture's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ToRapture's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">A Programmer</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://torapture.github.io/2020/04/24/Commands-for-IP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="ToRapture">
      <meta itemprop="description" content="Some notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ToRapture's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Commands for IP
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-24 16:47:00 16:47:00" itemprop="dateCreated datePublished" datetime="2020-04-24T16:47:00+08:00">2020-04-24 16:47:00</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 22:07:40 22:07:40" itemprop="dateModified" datetime="2020-10-11T22:07:40+08:00">2020-10-11 22:07:40</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/24/Commands-for-IP/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/24/Commands-for-IP/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="ifconfig">ifconfig</h2>
<p>https://linux.die.net/man/8/ifconfig</p>
<blockquote>
<p>Ifconfig is used to configure the kernel-resident network interfaces. It is used at boot time to set up interfaces as necessary. After that, it is usually only needed when debugging or when system tuning is needed.</p>
</blockquote>
<p>If no arguments are given, ifconfig displays the status of the currently active interfaces. If a single interface argument is given, it displays the status of the given interface only; if a single -a argument is given, it displays the status of all interfaces, even those that are down. Otherwise, it configures an interface.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ ifconfig</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 00:16:3e:10:27:9e</span><br><span class="line">          inet addr:172.16.62.130  Bcast:172.16.63.255  Mask:255.255.192.0</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:10188512 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:10123903 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000</span><br><span class="line">          RX bytes:1554718007 (1.5 GB)  TX bytes:15002653955 (15.0 GB)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback</span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  Metric:1</span><br><span class="line">          RX packets:5561316 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:5561316 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1</span><br><span class="line">          RX bytes:720550645 (720.5 MB)  TX bytes:720550645 (720.5 MB)</span><br><span class="line"></span><br><span class="line">$ ifconfig &lt;interface&gt; up</span><br><span class="line">$ ifconfig &lt;interface&gt; down</span><br></pre></td></tr></table></figure>
<hr />
<h2 id="route">route</h2>
<p>https://linux.die.net/man/8/route</p>
<blockquote>
<p>Route manipulates the kernel's IP routing tables. Its primary use is to set up static routes to specific hosts or networks via an interface after it has been configured with the ifconfig(8) program.</p>
</blockquote>
<p>When the add or del options are used, route modifies the routing tables. Without these options, route displays the current contents of the routing tables.</p>
<hr />
<p>https://superuser.com/a/580674</p>
<blockquote>
<p>The Gateway column identifies the defined gateway for the specified network. An asterisk (*) appears in this column if no forwarding gateway is needed for the network.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ route</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         172.16.63.253   0.0.0.0         UG    0      0        0 eth0</span><br><span class="line">172.16.0.0      *               255.255.192.0   U     0      0        0 eth0</span><br><span class="line"></span><br><span class="line">$ host baidu.com</span><br><span class="line">baidu.com has address 220.181.38.148</span><br><span class="line">baidu.com has address 39.156.69.79</span><br><span class="line">baidu.com mail is handled by 15 mx.n.shifen.com.</span><br><span class="line">baidu.com mail is handled by 20 mx50.baidu.com.</span><br><span class="line">baidu.com mail is handled by 10 mx.maillb.baidu.com.</span><br><span class="line">baidu.com mail is handled by 20 jpmx.baidu.com.</span><br><span class="line">baidu.com mail is handled by 20 mx1.baidu.com.</span><br><span class="line"></span><br><span class="line">$ ip route get 220.181.38.148</span><br><span class="line">220.181.38.148 via 172.16.63.253 dev eth0  src 172.16.62.130</span><br><span class="line">    cache</span><br><span class="line"></span><br><span class="line">$ ping -c1 220.181.38.148</span><br><span class="line">PING 220.181.38.148 (220.181.38.148) 56(84) bytes of data.</span><br><span class="line">64 bytes from 220.181.38.148: icmp_seq&#x3D;1 ttl&#x3D;49 time&#x3D;36.6 ms</span><br><span class="line"></span><br><span class="line">--- 220.181.38.148 ping statistics ---</span><br><span class="line">1 packets transmitted, 1 received, 0% packet loss, time 0ms</span><br><span class="line">rtt min&#x2F;avg&#x2F;max&#x2F;mdev &#x3D; 36.620&#x2F;36.620&#x2F;36.620&#x2F;0.000 ms</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ sudo route add 220.181.38.148 eth0</span><br><span class="line"></span><br><span class="line">$ route</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         172.16.63.253   0.0.0.0         UG    0      0        0 eth0</span><br><span class="line">172.16.0.0      *               255.255.192.0   U     0      0        0 eth0</span><br><span class="line">220.181.38.148  *               255.255.255.255 UH    0      0        0 eth0</span><br><span class="line"></span><br><span class="line">$ ip route get 220.181.38.148</span><br><span class="line">220.181.38.148 dev eth0  src 172.16.62.130</span><br><span class="line">    cache</span><br><span class="line"></span><br><span class="line">$ ping -c1 220.181.38.148</span><br><span class="line">PING 220.181.38.148 (220.181.38.148) 56(84) bytes of data.</span><br><span class="line">From 172.16.62.130 icmp_seq&#x3D;1 Destination Host Unreachable</span><br><span class="line"></span><br><span class="line">--- 220.181.38.148 ping statistics ---</span><br><span class="line">1 packets transmitted, 0 received, +1 errors, 100% packet loss, time 0ms</span><br><span class="line"></span><br><span class="line">$ sudo route del 220.181.38.148</span><br><span class="line"></span><br><span class="line">$ route</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         172.16.63.253   0.0.0.0         UG    0      0        0 eth0</span><br><span class="line">172.16.0.0      *               255.255.192.0   U     0      0        0 eth0</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ sudo route add 220.181.38.148 gw 172.16.63.253</span><br><span class="line"></span><br><span class="line">$ route</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         172.16.63.253   0.0.0.0         UG    0      0        0 eth0</span><br><span class="line">172.16.0.0      *               255.255.192.0   U     0      0        0 eth0</span><br><span class="line">220.181.38.148  172.16.63.253   255.255.255.255 UGH   0      0        0 eth0</span><br><span class="line"></span><br><span class="line">$ ip route get 220.181.38.148</span><br><span class="line">220.181.38.148 via 172.16.63.253 dev eth0  src 172.16.62.130</span><br><span class="line">    cache</span><br><span class="line"></span><br><span class="line">$ ping -c1 220.181.38.148</span><br><span class="line">PING 220.181.38.148 (220.181.38.148) 56(84) bytes of data.</span><br><span class="line">64 bytes from 220.181.38.148: icmp_seq&#x3D;1 ttl&#x3D;49 time&#x3D;36.5 ms</span><br><span class="line"></span><br><span class="line">--- 220.181.38.148 ping statistics ---</span><br><span class="line">1 packets transmitted, 1 received, 0% packet loss, time 0ms</span><br><span class="line">rtt min&#x2F;avg&#x2F;max&#x2F;mdev &#x3D; 36.538&#x2F;36.538&#x2F;36.538&#x2F;0.000 ms</span><br><span class="line"></span><br><span class="line">$ sudo route del 220.181.38.148</span><br><span class="line"></span><br><span class="line">$ route</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         172.16.63.253   0.0.0.0         UG    0      0        0 eth0</span><br><span class="line">172.16.0.0      *               255.255.192.0   U     0      0        0 eth0</span><br></pre></td></tr></table></figure>
<hr />
<h2 id="iptables">iptables</h2>
<p>https://linux.die.net/man/8/iptables</p>
<blockquote>
<p>iptables - administration tool for IPv4 packet filtering and NAT</p>
</blockquote>
<h3 id="default">default</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ iptables -L -v --line-numbers</span><br><span class="line">Chain INPUT (policy ACCEPT 290 packets, 18937 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT 202 packets, 41678 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"></span><br><span class="line">torapture@rapture$ ping -c4 D.D.D.D</span><br><span class="line">PING D.D.D.D (D.D.D.D) 56(84) bytes of data.</span><br><span class="line">64 bytes from D.D.D.D: icmp_seq&#x3D;1 ttl&#x3D;45 time&#x3D;192 ms</span><br><span class="line">64 bytes from D.D.D.D: icmp_seq&#x3D;2 ttl&#x3D;45 time&#x3D;180 ms</span><br><span class="line">64 bytes from D.D.D.D: icmp_seq&#x3D;3 ttl&#x3D;45 time&#x3D;194 ms</span><br><span class="line">64 bytes from D.D.D.D: icmp_seq&#x3D;4 ttl&#x3D;45 time&#x3D;180 ms</span><br><span class="line"></span><br><span class="line">--- D.D.D.D ping statistics ---</span><br><span class="line">4 packets transmitted, 4 received, 0% packet loss, time 2998ms</span><br><span class="line">rtt min&#x2F;avg&#x2F;max&#x2F;mdev &#x3D; 180.029&#x2F;186.853&#x2F;194.475&#x2F;6.724 ms</span><br></pre></td></tr></table></figure>
<h3 id="drop">drop</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ iptables -A INPUT -s S.S.S.S -j DROP</span><br><span class="line"></span><br><span class="line">torapture@rapture$ ping -c4 D.D.D.D</span><br><span class="line">PING D.D.D.D (D.D.D.D) 56(84) bytes of data.</span><br><span class="line"></span><br><span class="line">--- D.D.D.D ping statistics ---</span><br><span class="line">4 packets transmitted, 0 received, 100% packet loss, time 3024ms</span><br><span class="line"></span><br><span class="line">root@nenuoj$ iptables -L -v --line-numbers</span><br><span class="line">Chain INPUT (policy ACCEPT 54 packets, 3339 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">1        4   336 DROP       all  --  any    any     S.S.S.S       anywhere</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT 44 packets, 13276 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br></pre></td></tr></table></figure>
<h3 id="reject-tcp80">reject tcp:80</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ iptables -A INPUT -s S.S.S.S -p tcp --destination-port 80 -j REJECT</span><br><span class="line"></span><br><span class="line">torapture@rapture$ curl D.D.D.D</span><br><span class="line">curl: (7) Failed to connect to D.D.D.D port 80: Connection refused</span><br><span class="line"></span><br><span class="line">root@nenuoj$ iptables -L -v --line-numbers</span><br><span class="line">Chain INPUT (policy ACCEPT 91 packets, 5449 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">1        1    60 REJECT     tcp  --  any    any     S.S.S.S       anywhere             tcp dpt:http reject-with icmp-port-unreachable</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT 70 packets, 14548 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br></pre></td></tr></table></figure>
<hr />
<h2 id="ip">ip</h2>
<p>https://linux.die.net/man/8/ip</p>
<blockquote>
<p>ip - show / manipulate routing, devices, policy routing and tunnels</p>
</blockquote>
<h3 id="address">address</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ ip addr</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1</span><br><span class="line">    link&#x2F;loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1&#x2F;8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link&#x2F;ether 00:16:3e:10:27:9e brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.16.62.130&#x2F;18 brd 172.16.63.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>
<h3 id="link">link</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ ip link show eth0</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000</span><br><span class="line">    link&#x2F;ether 00:11:22:33:44:55 brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure>
<h3 id="route-1">route</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ ip route</span><br><span class="line">default via 172.16.63.253 dev eth0</span><br><span class="line">172.16.0.0&#x2F;18 dev eth0  proto kernel  scope link  src 172.16.62.130</span><br></pre></td></tr></table></figure>
<hr />
<h2 id="netstat">netstat</h2>
<p>https://linux.die.net/man/8/netstat</p>
<blockquote>
<p>netstat - Print network connections, routing tables, interface statistics, masquerade connections, and multicast memberships</p>
</blockquote>
<h3 id="list-all-tcp-listening-ports">List all tcp listening ports</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ netstat -tl</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State</span><br><span class="line">tcp        0      0 localhost:32000         *:*                     LISTEN</span><br><span class="line">tcp        0      0 *:27015                 *:*                     LISTEN</span><br><span class="line">tcp        0      0 localhost:mysql         *:*                     LISTEN</span><br><span class="line">tcp        0      0 localhost:11211         *:*                     LISTEN</span><br><span class="line">tcp        0      0 localhost:6379          *:*                     LISTEN</span><br><span class="line">tcp        0      0 *:http                  *:*                     LISTEN</span><br><span class="line">tcp        0      0 *:ssh                   *:*                     LISTEN</span><br><span class="line">tcp        0      0 *:https                 *:*                     LISTEN</span><br><span class="line">tcp        0      0 localhost:1087          *:*                     LISTEN</span><br><span class="line">tcp6       0      0 [::]:http               [::]:*                  LISTEN</span><br></pre></td></tr></table></figure>
<h3 id="list-all-tcp-connections-with-pid-and-numericals">List all tcp connections with pid and numericals</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ netstat -atnp</span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID&#x2F;Program name</span><br><span class="line">tcp        0      0 127.0.0.1:32000         0.0.0.0:*               LISTEN      972&#x2F;java</span><br><span class="line">tcp        0      0 0.0.0.0:27015           0.0.0.0:*               LISTEN      1323&#x2F;Judger</span><br><span class="line">tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      1203&#x2F;mysqld</span><br><span class="line">tcp        0      0 127.0.0.1:11211         0.0.0.0:*               LISTEN      1278&#x2F;memcached</span><br><span class="line">tcp        0      0 127.0.0.1:6379          0.0.0.0:*               LISTEN      808&#x2F;redis-server 12</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      1270&#x2F;nginx -g daemo</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1044&#x2F;sshd</span><br><span class="line">tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      1270&#x2F;nginx -g daemo</span><br><span class="line">tcp        0      0 127.0.0.1:1087          0.0.0.0:*               LISTEN      430&#x2F;privoxy</span><br><span class="line">tcp        0      0 172.16.62.130:38632     100.100.30.25:80        ESTABLISHED 1403&#x2F;AliYunDun</span><br><span class="line">tcp        0      0 172.16.62.130:80        182.122.161.236:52680   FIN_WAIT2   -</span><br><span class="line">tcp        0      0 172.16.62.130:80        182.122.161.236:52669   FIN_WAIT2   -</span><br><span class="line">tcp        0      0 172.16.62.130:80        182.122.161.236:52686   FIN_WAIT2   -</span><br><span class="line">tcp        0      0 127.0.0.1:32000         127.0.0.1:31000         ESTABLISHED 933&#x2F;wrapper</span><br><span class="line">tcp        0      0 172.16.62.130:80        182.122.161.236:52681   FIN_WAIT2   -</span><br><span class="line">tcp        0      0 172.16.62.130:80        182.122.161.236:52679   FIN_WAIT2   -</span><br><span class="line">tcp        0      0 127.0.0.1:31000         127.0.0.1:32000         ESTABLISHED 972&#x2F;java</span><br><span class="line">tcp        0    560 172.16.62.130:22        120.52.147.54:49840     ESTABLISHED 4232&#x2F;1</span><br><span class="line">tcp        0      0 172.16.62.130:80        182.122.161.236:52682   FIN_WAIT2   -</span><br><span class="line">tcp        0      0 172.16.62.130:80        182.122.161.236:52668   FIN_WAIT2   -</span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      1270&#x2F;nginx -g daemo</span><br></pre></td></tr></table></figure>
<h3 id="display-routing">Display routing</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ netstat -r</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</span><br><span class="line">default         172.16.63.253   0.0.0.0         UG        0 0          0 eth0</span><br><span class="line">172.16.0.0      *               255.255.192.0   U         0 0          0 eth0</span><br></pre></td></tr></table></figure>
<h3 id="show-interface-infomation">Show interface infomation</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@nenuoj$ netstat -i</span><br><span class="line">Kernel Interface table</span><br><span class="line">Iface   MTU Met   RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg</span><br><span class="line">eth0       1500 0     40465      0      0 0         33318      0      0      0 BMRU</span><br><span class="line">lo        65536 0     10406      0      0 0         10406      0      0      0 LRU</span><br></pre></td></tr></table></figure>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>ToRapture
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://torapture.github.io/2020/04/24/Commands-for-IP/" title="Commands for IP">https://torapture.github.io/2020/04/24/Commands-for-IP/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Network/" rel="tag"># Network</a>
              <a href="/tags/TCP-IP/" rel="tag"># TCP/IP</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/04/23/IP-checksum/" rel="prev" title="IP checksum">
      <i class="fa fa-chevron-left"></i> IP checksum
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/04/24/IPv4-headers/" rel="next" title="IPv4 headers">
      IPv4 headers <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ifconfig"><span class="nav-text">ifconfig</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#route"><span class="nav-text">route</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iptables"><span class="nav-text">iptables</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#default"><span class="nav-text">default</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#drop"><span class="nav-text">drop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reject-tcp80"><span class="nav-text">reject tcp:80</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ip"><span class="nav-text">ip</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#address"><span class="nav-text">address</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#link"><span class="nav-text">link</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#route-1"><span class="nav-text">route</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#netstat"><span class="nav-text">netstat</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#list-all-tcp-listening-ports"><span class="nav-text">List all tcp listening ports</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#list-all-tcp-connections-with-pid-and-numericals"><span class="nav-text">List all tcp connections with pid and numericals</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#display-routing"><span class="nav-text">Display routing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#show-interface-infomation"><span class="nav-text">Show interface infomation</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ToRapture"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">ToRapture</p>
  <div class="site-description" itemprop="description">Some notes</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">79</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/ToRapture" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ToRapture" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/ToRapture" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;ToRapture" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:torapture@gmail.com" title="E-Mail → mailto:torapture@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ToRapture</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://torapture.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://torapture.github.io/2020/04/24/Commands-for-IP/";
    this.page.identifier = "2020/04/24/Commands-for-IP/";
    this.page.title = "Commands for IP";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://torapture.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
